<template>
  <div id="levelbox">
    <!--Game Grid-->
    <div
      class="level2"
    >
      <div @click="checkCell(0)"></div>
      <div @click="checkCell(1)"></div>
      <div @click="checkCell(2)"></div>
      <div @click="checkCell(3)"></div>
      <div @click="checkCell(4)"></div>
      <div @click="checkCell(5)"></div>
      <div @click="checkCell(6)"></div>
      <div @click="checkCell(7)"></div>
      <div @click="checkCell(8)"></div>
      <div @click="checkCell(9)"></div>
      <div @click="checkCell(10)"></div>
      <div @click="checkCell(11)"></div>
      <div @click="checkCell(12)"></div>
      <div @click="checkCell(13)"></div>
      <div @click="checkCell(14)"></div>
      <div @click="checkCell(15)"></div>
      <div @click="checkCell(16)"></div>
      <div @click="checkCell(17)"></div>
      <div @click="checkCell(18)"></div>
      <div @click="checkCell(19)"></div>
      <div @click="checkCell(20)"></div>
      <div @click="checkCell(21)"></div>
      <div @click="checkCell(22)"></div>
      <div @click="checkCell(23)"></div>
      <div @click="checkCell(24)"></div>
      <div @click="checkCell(25)"></div>
      <div @click="checkCell(26)"></div>
      <div @click="checkCell(27)"></div>
      <div @click="checkCell(28)"></div>
      <div @click="checkCell(29)"></div>
      <div @click="checkCell(30)"></div>
      <div @click="checkCell(31)"></div>
      <div @click="checkCell(32)"></div>
      <div @click="checkCell(33)"></div>
      <div @click="checkCell(34)"></div>
      <div @click="checkCell(35)"></div>
      <div @click="checkCell(36)"></div>
      <div @click="checkCell(37)"></div>
      <div @click="checkCell(38)"></div>
      <div @click="checkCell(39)"></div>
      <div @click="checkCell(40)"></div>
      <div @click="checkCell(41)"></div>
      <div @click="checkCell(42)"></div>
      <div @click="checkCell(43)"></div>
      <div @click="checkCell(44)"></div>
      <div @click="checkCell(45)"></div>
      <div @click="checkCell(46)"></div>
      <div @click="checkCell(47)"></div>
      <div @click="checkCell(48)"></div>
      <div @click="checkCell(49)"></div>
      <div @click="checkCell(50)"></div>
      <div @click="checkCell(51)"></div>
      <div @click="checkCell(52)"></div>
      <div @click="checkCell(53)"></div>
      <div @click="checkCell(54)"></div>
      <div @click="checkCell(55)"></div>
      <div @click="checkCell(56)"></div>
      <div @click="checkCell(57)"></div>
      <div @click="checkCell(58)"></div>
      <div @click="checkCell(59)"></div>
      <div @click="checkCell(60)"></div>
      <div @click="checkCell(61)"></div>
      <div @click="checkCell(62)"></div>
      <div @click="checkCell(63)"></div>
      <div @click="checkCell(64)"></div>
      <div @click="checkCell(65)"></div>
      <div @click="checkCell(66)"></div>
      <div @click="checkCell(67)"></div>
      <div @click="checkCell(68)"></div>
      <div @click="checkCell(69)"></div>
      <div @click="checkCell(70)"></div>
      <div @click="checkCell(71)"></div>
      <div @click="checkCell(72)"></div>
      <div @click="checkCell(73)"></div>
      <div @click="checkCell(74)"></div>
      <div @click="checkCell(75)"></div>
      <div @click="checkCell(76)"></div>
      <div @click="checkCell(77)"></div>
      <div @click="checkCell(78)"></div>
      <div @click="checkCell(79)"></div>
      <div @click="checkCell(80)"></div>
      <div @click="checkCell(81)"></div>
      <div @click="checkCell(82)"></div>
      <div @click="checkCell(83)"></div>
      <div @click="checkCell(84)"></div>
      <div @click="checkCell(85)"></div>
      <div @click="checkCell(86)"></div>
      <div @click="checkCell(87)"></div>
      <div @click="checkCell(88)"></div>
      <div @click="checkCell(89)"></div>
      <div @click="checkCell(90)"></div>
      <div @click="checkCell(91)"></div>
      <div @click="checkCell(92)"></div>
      <div @click="checkCell(93)"></div>
      <div @click="checkCell(94)"></div>
      <div @click="checkCell(95)"></div>
      <div @click="checkCell(96)"></div>
      <div @click="checkCell(97)"></div>
      <div @click="checkCell(98)"></div>
      <div @click="checkCell(99)"></div>
      <div @click="checkCell(110)"></div>
      <div @click="checkCell(101)"></div>
      <div @click="checkCell(102)"></div>
      <div @click="checkCell(103)"></div>
      <div @click="checkCell(104)"></div>
      <div @click="checkCell(105)"></div>
      <div @click="checkCell(106)"></div>
      <div @click="checkCell(107)"></div>
      <div @click="checkCell(108)"></div>
      <div @click="checkCell(109)"></div>
      <div @click="checkCell(110)"></div>
      <div @click="checkCell(111)"></div>
      <div @click="checkCell(112)"></div>
      <div @click="checkCell(113)"></div>
      <div @click="checkCell(114)"></div>
      <div @click="checkCell(115)"></div>
      <div @click="checkCell(116)"></div>
      <div @click="checkCell(117)"></div>
      <div @click="checkCell(118)"></div>
      <div @click="checkCell(119)"></div>
      <div @click="checkCell(120)"></div>
      <div @click="checkCell(121)"></div>
      <div @click="checkCell(122)"></div>
      <div @click="checkCell(123)"></div>
      <div @click="checkCell(124)"></div>
      <div @click="checkCell(125)"></div>
      <div @click="checkCell(126)"></div>
      <div @click="checkCell(127)"></div>
      <div @click="checkCell(128)"></div>
      <div @click="checkCell(129)"></div>
      <div @click="checkCell(130)"></div>
      <div @click="checkCell(131)"></div>
      <div @click="checkCell(132)"></div>
      <div @click="checkCell(133)"></div>
      <div @click="checkCell(134)"></div>
      <div @click="checkCell(135)"></div>
      <div @click="checkCell(136)"></div>
      <div @click="checkCell(137)"></div>
      <div @click="checkCell(138)"></div>
      <div @click="checkCell(139)"></div>
      <div @click="checkCell(140)"></div>
      <div @click="checkCell(141)"></div>
      <div @click="checkCell(142)"></div>
      <div @click="checkCell(143)"></div>
      <div @click="checkCell(144)"></div>
      <div @click="checkCell(145)"></div>
      <div @click="checkCell(146)"></div>
      <div @click="checkCell(147)"></div>
      <div @click="checkCell(148)"></div>
      <div @click="checkCell(149)"></div>
      <div @click="checkCell(150)"></div>
      <div @click="checkCell(151)"></div>
      <div @click="checkCell(152)"></div>
      <div @click="checkCell(153)"></div>
      <div @click="checkCell(154)"></div>
      <div @click="checkCell(155)"></div>
      <div @click="checkCell(156)"></div>
      <div @click="checkCell(157)"></div>
      <div @click="checkCell(158)"></div>
      <div @click="checkCell(159)"></div>
      <div @click="checkCell(160)"></div>
      <div @click="checkCell(161)"></div>
      <div @click="checkCell(162)"></div>
      <div @click="checkCell(163)"></div>
      <div @click="checkCell(164)"></div>
      <div @click="checkCell(165)"></div>
      <div @click="checkCell(166)"></div>
      <div @click="checkCell(167)"></div>
      <div @click="checkCell(168)"></div>
      <div @click="checkCell(169)"></div>
      <div @click="checkCell(170)"></div>
      <div @click="checkCell(171)"></div>
      <div @click="checkCell(172)"></div>
      <div @click="checkCell(173)"></div>
      <div @click="checkCell(174)"></div>
      <div @click="checkCell(175)"></div>
      <div @click="checkCell(176)"></div>
      <div @click="checkCell(177)"></div>
      <div @click="checkCell(178)"></div>
      <div @click="checkCell(179)"></div>
      <div @click="checkCell(180)"></div>
      <div @click="checkCell(181)"></div>
      <div @click="checkCell(182)"></div>
      <div @click="checkCell(183)"></div>
      <div @click="checkCell(184)"></div>
      <div @click="checkCell(185)"></div>
      <div @click="checkCell(186)"></div>
      <div @click="checkCell(187)"></div>
      <div @click="checkCell(188)"></div>
      <div @click="checkCell(189)"></div>
      <div @click="checkCell(190)"></div>
      <div @click="checkCell(191)"></div>
      <div @click="checkCell(192)"></div>
      <div @click="checkCell(193)"></div>
      <div @click="checkCell(194)"></div>
      <div @click="checkCell(195)"></div>
      <div @click="checkCell(196)"></div>
      <div @click="checkCell(197)"></div>
      <div @click="checkCell(198)"></div>
      <div @click="checkCell(199)"></div>
      <div @click="checkCell(200)"></div>
      <div @click="checkCell(201)"></div>
      <div @click="checkCell(202)"></div>
      <div @click="checkCell(203)"></div>
      <div @click="checkCell(204)"></div>
      <div @click="checkCell(205)"></div>
      <div @click="checkCell(206)"></div>
      <div @click="checkCell(207)"></div>
      <div @click="checkCell(208)"></div>
      <div @click="checkCell(209)"></div>
      <div @click="checkCell(210)"></div>
      <div @click="checkCell(211)"></div>
      <div @click="checkCell(212)"></div>
      <div @click="checkCell(213)"></div>
      <div @click="checkCell(214)"></div>
      <div @click="checkCell(215)"></div>
      <div @click="checkCell(216)"></div>
      <div @click="checkCell(217)"></div>
      <div @click="checkCell(218)"></div>
      <div @click="checkCell(219)"></div>
      <div @click="checkCell(220)"></div>
      <div @click="checkCell(221)"></div>
      <div @click="checkCell(222)"></div>
      <div @click="checkCell(223)"></div>
      <div @click="checkCell(224)"></div>
      <div @click="checkCell(225)"></div>
      <div @click="checkCell(226)"></div>
      <div @click="checkCell(227)"></div>
      <div @click="checkCell(228)"></div>
      <div @click="checkCell(229)"></div>
      <div @click="checkCell(230)"></div>
      <div @click="checkCell(231)"></div>
      <div @click="checkCell(232)"></div>
      <div @click="checkCell(233)"></div>
      <div @click="checkCell(234)"></div>
      <div @click="checkCell(235)"></div>
      <div @click="checkCell(236)"></div>
      <div @click="checkCell(237)"></div>
      <div @click="checkCell(238)"></div>
      <div @click="checkCell(239)"></div>
      <div @click="checkCell(240)"></div>
      <div @click="checkCell(241)"></div>
      <div @click="checkCell(242)"></div>
      <div @click="checkCell(243)"></div>
      <div @click="checkCell(244)"></div>
      <div @click="checkCell(245)"></div>
      <div @click="checkCell(246)"></div>
      <div @click="checkCell(247)"></div>
      <div @click="checkCell(248)"></div>
      <div @click="checkCell(249)"></div>
    </div>
  </div>
</template>

<script>
export default {
  data() {
    return {
      mineIndices: [],
      squares: []
    }
  },
  methods: {
    checkCell(cell_index) {
      if (!this.mineIndices.includes(cell_index)) {
        this.squares[cell_index].classList.add('uncovered')
      } else {
        let image_element = new Image(40,40)
        image_element.src = "/src/assets/mine.png"
        image_element.setAttribute("height", "40");
        image_element.setAttribute("width", "40");
        console.log(image_element)
        // this.squares[this.mineIndices[i]].appendChild(image_element)
        this.squares[cell_index].classList.add('mine')
        this.gameOver()
      }
    },
    gameOver() {
      let level_box = document.getElementById('levelbox')
      let game_over = document.createElement('h1')
      game_over.innerText = "GAME OVER"
      level_box.appendChild(game_over)
    },
    getSquares() {
      this.squares = Array.from(document.querySelectorAll('.level2 div'))
    },
    placeMines(num_cells, num_mines) {
      // function to get random integer in range of
      // number of cells in the level
      function getRandomInt(max) {
        return Math.floor(Math.random() * max)
      }
      // code snippet gets the indices for the random
      // placement of the mines in the level
      let i = 0
      while (i < num_mines) {
        let placement = getRandomInt(num_cells)
        if (!this.mineIndices.includes(placement)) {
          this.mineIndices.push(placement)
          i++
        }
      }
    }
  },
  mounted() {
    this.getSquares()
    this.placeMines(250, 30)
  }
}
</script>

<style scoped>
.level2 {
  width: 1020px;
  height: 420px;
  flex-wrap: wrap;
  display: flex;
  background-color: #999999;
  border: #000000 10px solid;
  margin: 0 auto;
}
.level2 div {
  height: 40px;
  width: 40px;
  border: #ffffff 1px solid;
  margin: 0px;
  padding: 0px;
}
</style>
